<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SkinArt Tattoo & Piercing</title>
    <!-- Font Google -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-black: #000000;
            --card-bg: rgba(17, 17, 17, 0.9);
            --border-gray: #333333;
            --accent-white: #ffffff;
            --text-main: #ffffff;
            --text-dim: #bbbbbb;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Inter', sans-serif;
        }

        body, html {
            margin: 0; padding: 0;
            background-color: var(--bg-black);
            color: var(--text-main);
            height: 100%;
            width: 100%;
            overflow: hidden;
        }

        /* SFONDO */
        .bg-image {
            position: fixed;
            top: 0; left: 0; 
            width: 100%; height: 100%;
            background-image: url('background.jpg'); 
            background-size: cover;
            background-position: center;
            z-index: -5; 
            background-color: #000;
        }

        .bg-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.95) 100%);
            z-index: -4;
        }

        /* PROGRESS BAR */
        .progress-bar-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 4px;
            background: rgba(255,255,255,0.1);
            z-index: 100;
        }

        #progress-fill {
            height: 100%;
            width: 0%;
            background: var(--accent-white);
            box-shadow: 0 0 10px var(--accent-white);
            transition: width 0.5s ease;
        }

        /* SLIDER */
        .main-slider {
            display: flex;
            width: 900%; 
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.85, 0, 0.15, 1);
        }

        section {
            width: 100vw;
            height: 100vh;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }

        .content-wrapper {
            width: 100%;
            max-width: 450px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* LOGO */
        .logo-container {
            width: 130px;
            height: 130px;
            margin-bottom: 25px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid var(--accent-white);
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 30px rgba(255,255,255,0.1);
        }

        .logo-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 900;
            margin: 0 0 12px 0;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        p.subtitle {
            color: var(--text-dim);
            text-align: center;
            margin: 0 0 30px 0;
            font-size: 0.85rem;
            max-width: 320px;
            line-height: 1.5;
        }

        /* PULSANTI E GRIGLIE */
        .option-grid {
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .full-width {
            grid-column: span 2;
        }

        .option-btn {
            background: var(--card-bg);
            border: 1px solid var(--border-gray);
            padding: 18px 10px;
            border-radius: 8px;
            color: white;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            display: flex;
            flex-direction: column;
            gap: 6px;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            user-select: none;
        }

        .option-btn .label { 
            font-weight: 800; 
            font-size: 0.85rem;
            width: 100%;
            text-align: center;
        }

        .option-btn .sub-label {
            font-size: 0.65rem;
            opacity: 0.7;
            font-weight: 400;
        }

        .option-btn.selected {
            border-color: var(--accent-white);
            background: var(--accent-white);
            color: black;
            transform: scale(1.02);
        }

        /* STILI CARDS */
        .style-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
            max-height: 60vh;
            overflow-y: auto;
            padding: 5px;
        }

        .style-card {
            background: var(--card-bg);
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s, border-color 0.3s;
            position: relative;
        }

        .style-card.centered-full {
            grid-column: span 2;
            width: 60%;
            margin: 0 auto;
        }

        .style-card img {
            width: 100%;
            height: 140px;
            object-fit: cover;
            filter: brightness(0.6);
            display: block;
            transition: filter 0.3s;
        }

        .style-card.selected {
            border-color: var(--accent-white);
        }

        .style-card .info {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: rgba(0,0,0,0.7);
            padding: 8px;
            text-align: center;
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            line-height: 1.2;
        }

        /* GIORNI E ORARI */
        .selection-label {
            width: 100%;
            font-size: 0.7rem;
            font-weight: 800;
            text-transform: uppercase;
            color: var(--text-dim);
            margin: 20px 0 10px 0;
            text-align: center;
        }

        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            width: 100%;
            margin-bottom: 10px;
        }

        .day-btn {
            padding: 12px 4px;
            font-size: 0.7rem;
        }

        .day-btn .label {
            font-size: 0.7rem;
        }

        .times-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            width: 100%;
        }

        /* ARTISTI */
        .team-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
        }

        .artist-card {
            background: var(--card-bg);
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            overflow: hidden;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
        }

        .artist-card img {
            width: 100%;
            height: 160px;
            object-fit: cover;
        }

        .artist-card .name {
            padding: 10px;
            font-weight: 800;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .artist-card.selected { border-color: var(--accent-white); }
        .artist-card.selected .name { background: var(--accent-white); color: black; }

        .no-preference-card {
            grid-column: span 2;
            padding: 20px;
            background: var(--card-bg);
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            text-align: center;
            font-weight: 800;
            font-size: 0.8rem;
            text-transform: uppercase;
            cursor: pointer;
        }

        /* PIERCING PRESETS */
        .piercing-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            width: 100%;
            margin-bottom: 20px;
        }

        /* INPUTS */
        input[type="text"], textarea {
            width: 100%;
            background: var(--card-bg);
            border: 1px solid var(--border-gray);
            padding: 18px;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            outline: none;
            text-align: center;
            margin-bottom: 15px;
        }

        textarea {
            text-align: left;
            height: 110px;
            font-size: 0.9rem;
            resize: none;
        }

        .btn-primary {
            background: var(--accent-white);
            border: none;
            padding: 20px;
            border-radius: 8px;
            color: black;
            font-weight: 900;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            width: 100%;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255,255,255,0.2);
        }

        .btn-back {
            background: transparent;
            color: var(--text-dim);
            border: none;
            font-size: 0.75rem;
            cursor: pointer;
            margin-top: 25px;
            text-transform: uppercase;
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <div class="bg-image"></div>
    <div class="bg-overlay"></div>
    <div class="progress-bar-container"><div id="progress-fill"></div></div>

    <div class="main-slider" id="slider">
        
        <!-- STEP 0: SCELTA INIZIALE -->
        <section>
            <div class="content-wrapper">
                <div class="logo-container">
                    <img src="profile.jpg" alt="SkinArt Logo" onerror="this.src='https://images.unsplash.com/photo-1598371839696-5c5bb00bdc28?w=300'">
                </div>
                <h2>SkinArt Studio</h2>
                <p class="subtitle">Scegli il servizio per iniziare la tua prenotazione.</p>
                <div class="option-grid">
                    <button class="option-btn full-width" onclick="startFlow('tattoo')">
                        <span class="label">Tatuaggio</span>
                    </button>
                    <button class="option-btn full-width" onclick="startFlow('piercing')">
                        <span class="label">Piercing</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- TATTOO: GRANDEZZA (STEP 1) -->
        <section>
            <div class="content-wrapper">
                <h2>Grandezza</h2>
                <p class="subtitle">Indica la dimensione approssimativa del tatuaggio</p>
                <div class="option-grid">
                    <div class="option-btn" onclick="selectTattooOption('size', 'Piccolo (Fino a 5cm)', this)">
                        <span class="label">Piccolo</span>
                        <span class="sub-label">Fino a 5cm</span>
                    </div>
                    <div class="option-btn" onclick="selectTattooOption('size', 'Medio (Fino a 10cm)', this)">
                        <span class="label">Medio</span>
                        <span class="sub-label">Fino a 10cm</span>
                    </div>
                    <div class="option-btn" onclick="selectTattooOption('size', 'Grande (Oltre 15cm)', this)">
                        <span class="label">Grande</span>
                        <span class="sub-label">Oltre 15cm</span>
                    </div>
                    <div class="option-btn" onclick="selectTattooOption('size', 'Intero (Braccio/Gamba)', this)">
                        <span class="label">Intero</span>
                        <span class="sub-label">Braccio/Gamba</span>
                    </div>
                </div>
                <button class="btn-back" onclick="goToStep(0)">Torna Indietro</button>
            </div>
        </section>

        <!-- TATTOO: STILE (STEP 2) -->
        <section>
            <div class="content-wrapper">
                <h2>Stile</h2>
                <p class="subtitle">Quale stile preferisci per questo progetto?</p>
                <div class="style-grid">
                    <div class="style-card" onclick="selectTattooStyle(this, 'Fine Line')">
                        <img src="fineline.jpg" alt="Fine Line" onerror="this.src='https://images.unsplash.com/photo-1560707303-4e980ce876ad?w=400'">
                        <div class="info">Fine Line</div>
                    </div>
                    <div class="style-card" onclick="selectTattooStyle(this, 'Realistico')">
                        <img src="realistico.jpg" alt="Realistico" onerror="this.src='https://images.unsplash.com/photo-1598371839696-5c5bb00bdc28?w=400'">
                        <div class="info">Realistico</div>
                    </div>
                    <div class="style-card" onclick="selectTattooStyle(this, 'Geometrico/Ornamentale/Blackwork')">
                        <img src="blackwork.jpg" alt="Geometrico" onerror="this.src='https://images.unsplash.com/photo-1611501275019-9b5cda994e8d?w=400'">
                        <div class="info">Geometrico / Ornamentale / Blackwork</div>
                    </div>
                    <div class="style-card" onclick="selectTattooStyle(this, 'Manga/Cartoon/Colorato')">
                        <img src="cartoon.jpeg" alt="Manga" onerror="this.src='https://images.unsplash.com/photo-1578632292335-df3abbb0d586?w=400'">
                        <div class="info">Manga / Cartoon / Colorato</div>
                    </div>
                    <div class="style-card centered-full" onclick="selectTattooStyle(this, 'Altro')">
                        <img src="altro.jpeg" alt="Altro" onerror="this.src='https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=400'">
                        <div class="info">Altro</div>
                    </div>
                </div>
                <button class="btn-back" onclick="prevStep()">Indietro</button>
            </div>
        </section>

        <!-- TATTOO: PROGETTO (STEP 3) -->
        <section>
            <div class="content-wrapper">
                <h2>Idea Progetto</h2>
                <p class="subtitle">A che punto √® la tua idea?</p>
                <div class="option-grid">
                    <div class="option-btn" onclick="selectTattooOption('status', 'Disegno pronto', this)"><span class="label">Ho il disegno</span></div>
                    <div class="option-btn" onclick="selectTattooOption('status', 'Solo idea', this)"><span class="label">Ho un'idea</span></div>
                    <div class="option-btn full-width" onclick="selectTattooOption('status', 'Da zero', this)"><span class="label">Voglio una consulenza</span></div>
                </div>
                <button class="btn-back" onclick="prevStep()">Indietro</button>
            </div>
        </section>

        <!-- TATTOO: TATUATORE (STEP 4) -->
        <section>
            <div class="content-wrapper">
                <h2>Tatuatore</h2>
                <p class="subtitle">I nostri specialisti per lo stile scelto</p>
                <div class="team-grid" id="tattoo-artist-list">
                    <!-- Dinamico -->
                </div>
                <button class="btn-back" onclick="prevStep()">Indietro</button>
            </div>
        </section>

        <!-- PIERCING: ZONA (STEP 5) -->
        <section id="step-piercing-zone">
            <div class="content-wrapper">
                <h2>Piercing</h2>
                <p class="subtitle">Scegli la zona o scrivi un'altra posizione</p>
                <div class="piercing-grid">
                    <div class="option-btn" onclick="selectPiercingPreset('Naso', this)"><span class="label">Naso</span></div>
                    <div class="option-btn" onclick="selectPiercingPreset('Ombelico', this)"><span class="label">Ombelico</span></div>
                    <div class="option-btn" onclick="selectPiercingPreset('Helix', this)"><span class="label">Helix</span></div>
                    <div class="option-btn" onclick="selectPiercingPreset('Lobo', this)"><span class="label">Lobo</span></div>
                    <div class="option-btn" onclick="selectPiercingPreset('Lingua', this)"><span class="label">Lingua</span></div>
                    <div class="option-btn" onclick="selectPiercingPreset('Septum', this)"><span class="label">Septum</span></div>
                </div>
                <input type="text" id="piercingZone" placeholder="Altra zona...">
                <button class="btn-primary" onclick="confirmPiercingZone()">Continua</button>
                <button class="btn-back" onclick="goToStep(0)">Indietro</button>
            </div>
        </section>

        <!-- COMUNE: CALENDARIO (STEP 6) -->
        <section>
            <div class="content-wrapper">
                <h2>Disponibilit√†</h2>
                <p class="subtitle">Quando preferiresti venire in studio?</p>
                <div class="option-btn full-width" id="btn-always" onclick="toggleAlwaysAvailable()" style="margin-bottom: 10px;">
                    <span class="label">Sempre Disponibile</span>
                </div>
                <div class="selection-label">Giorni preferiti</div>
                <div class="days-grid">
                    <div class="option-btn day-btn" onclick="toggleMultiSelect('days', 'Lun', this)"><span class="label">Lun</span></div>
                    <div class="option-btn day-btn" onclick="toggleMultiSelect('days', 'Mar', this)"><span class="label">Mar</span></div>
                    <div class="option-btn day-btn" onclick="toggleMultiSelect('days', 'Mer', this)"><span class="label">Mer</span></div>
                    <div class="option-btn day-btn" onclick="toggleMultiSelect('days', 'Gio', this)"><span class="label">Gio</span></div>
                    <div class="option-btn day-btn" onclick="toggleMultiSelect('days', 'Ven', this)"><span class="label">Ven</span></div>
                    <div class="option-btn day-btn" onclick="toggleMultiSelect('days', 'Sab', this)"><span class="label">Sab</span></div>
                    <div class="option-btn day-btn" onclick="toggleMultiSelect('days', 'Dom', this)"><span class="label">Dom</span></div>
                </div>
                <div class="selection-label">Fascia oraria</div>
                <div class="times-grid">
                    <div class="option-btn time-btn" onclick="toggleMultiSelect('times', 'Mattina', this)"><span class="label">Mattina</span></div>
                    <div class="option-btn time-btn" onclick="toggleMultiSelect('times', 'Pomeriggio', this)"><span class="label">Pome</span></div>
                    <div class="option-btn time-btn" onclick="toggleMultiSelect('times', 'Sera', this)"><span class="label">Sera</span></div>
                </div>
                <button class="btn-primary" onclick="validateAvailability()" style="margin-top: 20px;">Continua</button>
                <button class="btn-back" onclick="prevStep()">Indietro</button>
            </div>
        </section>

        <!-- COMUNE: NOTE (STEP 7) -->
        <section>
            <div class="content-wrapper">
                <h2>Dettagli</h2>
                <p class="subtitle">Note aggiuntive o allergie particolari</p>
                <textarea id="otherInfo" placeholder="Inserisci qui eventuali dettagli utili..."></textarea>
                <button class="btn-primary" onclick="nextStep()">Continua</button>
                <button class="btn-back" onclick="prevStep()">Indietro</button>
            </div>
        </section>

        <!-- FINALE: NOME (STEP 8) -->
        <section>
            <div class="content-wrapper">
                <h2>Prenota</h2>
                <p class="subtitle">Inserisci il tuo nome per inviare la richiesta</p>
                <input type="text" id="userName" placeholder="IL TUO NOME">
                <button class="btn-primary" onclick="sendWhatsApp()">Invia Richiesta</button>
                <button class="btn-back" onclick="prevStep()">Indietro</button>
            </div>
        </section>

    </div>

    <script>
        let step = 0;
        let flow = '';
        const slider = document.getElementById('slider');
        const bar = document.getElementById('progress-fill');
        const totalSteps = 8;
        
        let data = { 
            type: '', size: '', style: '', status: '', artist: '', 
            piercingZone: '', info: '', name: '',
            selectedDays: [], selectedTimes: []
        };

        const artists = [
            { name: 'Biagio', img: 'biagio.jpeg', styles: ['Fine Line', 'Realistico', 'Geometrico/Ornamentale/Blackwork', 'Altro'] },
            { name: 'Domenica', img: 'domenica.jpeg', styles: ['Fine Line', 'Altro'] },
            { name: 'Jacopo', img: 'jacopo.jpeg', styles: ['Manga/Cartoon/Colorato', 'Altro'] },
            { name: 'Evita', img: 'evita.jpeg', styles: ['Manga/Cartoon/Colorato', 'Altro'] }
        ];

        function updateUI() {
            slider.style.transform = `translateX(-${step * 100}vw)`;
            bar.style.width = `${(step / totalSteps) * 100}%`;
        }

        function goToStep(s) { step = s; updateUI(); }
        function nextStep() { step++; updateUI(); }
        
        function prevStep() { 
            if(flow === 'piercing' && step === 7) step = 5; 
            else step--;
            updateUI();
        }

        function startFlow(type) {
            flow = type;
            data.type = type;
            step = (type === 'tattoo') ? 1 : 5;
            updateUI();
        }

        function selectTattooOption(key, val, el) {
            data[key] = val;
            el.closest('section').querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            el.classList.add('selected');
            
            if (key === 'status') {
                const filtered = artists.filter(a => a.styles.includes(data.style));
                setTimeout(() => {
                    step = (filtered.length > 1) ? 4 : 6;
                    updateUI();
                }, 250);
            } else {
                setTimeout(nextStep, 250);
            }
        }

        function selectTattooStyle(el, style) {
            data.style = style;
            document.querySelectorAll('.style-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            
            const list = document.getElementById('tattoo-artist-list');
            list.innerHTML = '';
            const filtered = artists.filter(a => a.styles.includes(style));
            
            filtered.forEach(a => {
                const card = document.createElement('div');
                card.className = 'artist-card';
                card.onclick = () => selectArtist(a.name, card);
                card.innerHTML = `<img src="${a.img}" onerror="this.src='https://images.unsplash.com/photo-1590004653394-3f84aea4e1af?w=400'"><div class="name">${a.name}</div>`;
                list.appendChild(card);
            });

            if (filtered.length > 1) {
                const noPref = document.createElement('div');
                noPref.className = 'no-preference-card';
                noPref.onclick = () => selectArtist('Senza preferenza', noPref);
                noPref.innerText = 'Nessuna Preferenza';
                list.appendChild(noPref);
            } else if (filtered.length === 1) {
                data.artist = filtered[0].name;
            }

            setTimeout(nextStep, 300);
        }

        function selectArtist(name, el) {
            data.artist = name;
            document.querySelectorAll('.artist-card, .no-preference-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            setTimeout(() => { step = 6; updateUI(); }, 250);
        }

        function selectPiercingPreset(val, el) {
            data.piercingZone = val;
            document.getElementById('piercingZone').value = val;
            el.closest('.piercing-grid').querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            el.classList.add('selected');
        }

        function confirmPiercingZone() {
            const val = document.getElementById('piercingZone').value;
            if(!val) return;
            data.piercingZone = val;
            data.artist = "Ivan";
            step = 7; 
            updateUI();
        }

        function toggleMultiSelect(type, val, el) {
            const key = type === 'days' ? 'selectedDays' : 'selectedTimes';
            const i = data[key].indexOf(val);
            if(i > -1) { data[key].splice(i,1); el.classList.remove('selected'); }
            else { data[key].push(val); el.classList.add('selected'); }
        }

        function toggleAlwaysAvailable() {
            const btn = document.getElementById('btn-always');
            const totalPossibleDays = 7;
            if(data.selectedDays.length === totalPossibleDays) {
                data.selectedDays = []; data.selectedTimes = [];
                btn.classList.remove('selected');
                document.querySelectorAll('.day-btn, .time-btn').forEach(b => b.classList.remove('selected'));
            } else {
                data.selectedDays = ['Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab', 'Dom'];
                data.selectedTimes = ['Mattina', 'Pomeriggio', 'Sera'];
                btn.classList.add('selected');
                document.querySelectorAll('.day-btn, .time-btn').forEach(b => b.classList.add('selected'));
            }
        }

        function validateAvailability() {
            if(data.selectedDays.length === 0 || data.selectedTimes.length === 0) return;
            nextStep();
        }

        function sendWhatsApp() {
            data.name = document.getElementById('userName').value;
            data.info = document.getElementById('otherInfo').value;
            if(!data.name) return;

            let msg = `*NUOVA RICHIESTA ${data.type.toUpperCase()}*%0A%0A`;
            msg += `üë§ *Nome:* ${data.name}%0A`;
            
            if(data.type === 'tattoo') {
                msg += `üìè *Misura:* ${data.size}%0Aüé® *Stile:* ${data.style}%0A‚ú® *Artista:* ${data.artist}%0A`;
                msg += `üìÖ *Giorni:* ${data.selectedDays.join(', ')}%0A‚è∞ *Orari:* ${data.selectedTimes.join(', ')}%0A`;
            } else {
                msg += `üìç *Zona:* ${data.piercingZone}%0Aüíé *Piercer:* Ivan%0A`;
            }
            msg += `üìù *Note:* ${data.info || 'Nessuna'}`;
            
            window.open(`https://wa.me/393347280140?text=${msg}`, '_blank');
        }
    </script>
</body>
</html>
